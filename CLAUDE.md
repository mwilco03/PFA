# Claude Code Memory - PFA Trajectory App

## Critical Information

### User Workflow
- **USER ALWAYS PUSHES DIRECTLY TO MAIN** - No PR workflow, changes go straight to main branch
- Never ask user to create PRs or merge via PR process
- User handles all git operations directly

### GitHub Pages Deployment Issue (2026-02-08)

**Problem Found:**
- Root `index.html` (development file) was being served instead of built `dist/index.html`
- Browser error: "Loading module from https://mwilco03.github.io/src/main.jsx was blocked because of a disallowed MIME type"
- GitHub Pages must be configured to deploy from "GitHub Actions" NOT "Deploy from branch"

**Root Cause:**
1. Development `index.html` in repository root points to `/src/main.jsx` (development path)
2. Built `dist/index.html` points to `/PFA/assets/index-[hash].js` (production path)
3. If GitHub Pages deploys from branch, it serves root index.html
4. If GitHub Pages deploys from Actions, it serves dist/index.html

**Solution:**
- Removed root `index.html` (deleted 2026-02-08)
- Root index.html is a SOURCE file for Vite, should NOT be in git
- Vite builds it into dist/index.html during `npm run build`
- GitHub Actions workflow already configured correctly to deploy ./dist folder
- **VERIFY:** GitHub Pages settings → Source must be set to "GitHub Actions"

### Project Structure
- Vite + React 18 + Tailwind CSS
- Base path: `/PFA/` (for GitHub Pages mwilco03/PFA)
- Development: `npm run dev` → http://localhost:5173/PFA/
- Production: Build to dist/, deploy via GitHub Actions

### Common Issues Checklist

**White screen on deployed site:**
1. ✅ Check browser console for MIME type errors
2. ✅ Verify GitHub Pages source is "GitHub Actions" not "Branch"
3. ✅ Ensure root index.html doesn't exist (should only be in dist/)
4. ✅ Check dist/index.html has correct base path `/PFA/`
5. ✅ Verify vite.config.js has `base: '/PFA/'`

**App works locally but not deployed:**
- Local dev server ignores base path issues
- Production must have correct base path
- Check Network tab for 404s on assets

### Files That Should NOT Be in Git Root
- `index.html` - This is generated by Vite build, belongs only in dist/
- `dist/` folder - In .gitignore, built by GitHub Actions

### Files That SHOULD Be in Git Root
- `vite.config.js` - Build configuration
- `.github/workflows/deploy.yml` - Deployment workflow
- `src/` - Source code
- `public/` - Static assets
- `package.json` - Dependencies

### Code Changes That Broke Deployment (2026-02-08)

**Changes that DIDN'T break it:**
- Removed assessment date picker from SelfCheckTab ✓
- Added target PFA date to ProfileTab ✓
- Added targetPfaDate to AppContext ✓
- Added decodeDCode import and call in AppContext ✓

**Actual cause of white screen:**
- GitHub Pages configuration was deploying from branch instead of Actions
- Root index.html being served (development version)
- NOT a code issue - was a deployment configuration issue

### Lessons Learned
- Always check browser console Network tab for MIME type errors
- White screen ≠ code bug (can be deployment config)
- Root index.html should not exist in git for Vite projects
- GitHub Actions can build correctly but Pages source must point to Actions artifact
